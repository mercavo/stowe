class Account < ApplicationRecord
  before_create :create_stripe_customer
  validates :name, presence: :true
  has_and_belongs_to_many :users
  has_many :supports
  has_many :subscribes
  
  def self.search(q)
    return self.where('name LIKE ?', "%#{q}%") if q.present?

    self.all
  end

  private
  
  def create_stripe_customer
     customer = Stripe::Customer.create({
       name: self.name
     })
     self.stripe = customer.id
  end
end